---
layout: post
title: 如何创建 Qt 工程
categories:
- TooYoung
tags:
- designer
- moc
- qt
- ui
published: true
comments: true
---
<p>刚才打了一大段字，不小心给其他页面覆盖了……看来WP的自动保存功能还是得开启……</p>

<p>最近有心学一下GUI编程，在GTK, wxWidgets和QT之间选择，最后因为QT Designer和喜欢C++的缘故选择了QT。当然QT4 Designer也不是那么傻瓜化的东西，有很多步骤都需要自己来完成。经过一番Google上的学习之后，我总算完成了一个简单的QT工程的创建，因此以这个工程为例，记录一下创建过程，以供参考。</p>

<p><blockquote>
项目名称：POS<br />
主程序名：main.cpp<br />
主窗口及SIGNAL/SLOT处理：POSMainWindow[.h, .cpp]<br />
界面文件：ui_POSMainWindow.h, POSMainWindow.ui
<a href="http://www.qiliang.net/qt/moc.html">Meta Object Compiler</a>文件：moc_POSMainWindow[.h, .cpp]
</blockquote></p>

<p>1. 新建界面配置文件(POSMainWindow.ui)</p>

<p><!--more-->通过在QT4 Designer中拖拽拖拽就能生成一个基本的.ui配置文件了。</p>

<p>2. 生成ui头文件(ui_POSMainWindow.h)</p>

<p><pre lang="bash">uic POSMainWindow.ui -o ui_POSMainWindow.h</pre></p>

<p>3. 编写主窗口及SIGNAL/SLOT处理文件(POSMainWindow.h, POSMainWindow.cpp)</p>

<p>POSMainWindow.h</p>

<p><pre lang="cpp" line="1">#ifndef _POSMAINWINDOW_H_
#define _POSMAINWINDOW_H_</pre></p>

<p>#include <qmainwindow.h>
#include "ui_POSMainWindow.h"</qmainwindow.h></p>

<p>class POSMainWindow : <br />
    public QMainWindow, public Ui::POSMainWindow<br />
{
    Q_OBJECT<br />
    public:<br />
        POSMainWindow(QMainWindow *parent = 0);<br />
    public slots:<br />
        // your own slots<br />
};</p>

<p>#endif /*_POSMAINWINDOW_H_*/</p>

<p>POSMainWindow.cpp</p>

<p><pre lang="cpp" line="1">#include "POSMainWindow.h"</pre></p>

<p>POSMainWindow::POSMainWindow(QMainWindow *parent) : <br />
    QMainWindow(parent)<br />
{
    setupUi(this);<br />
    this->show();<br />
//    connect(panel, SIGNAL(...()), this, SLOT(...()));<br />
}</p>

<p>//void POSMainWindow::SLOT()<br />
//{<br />
//    ...........<br />
//}</p>

<p>4. 生成MOC文件(moc_POSMainWindow.h, moc_POSMainWindow.cpp)</p>

<p>因为自定义SLOT之前需要使用Q_OBJECT宏，而这个宏<a href="http://www.qiliang.net/qt/moc.html">跟元对象编译器有关</a>，因此要生成对应的moc文件才不至于在link的时候报错。</p>

<p><pre lang="bash">moc MainWindow.h -o moc_MainWindow.h</pre></p>

<p>之后生成了两个moc前缀的文件。</p>

<p>5. 生成主程序(main.cpp)</p>

<p><pre lang="cpp" line="1">
#include "POSMainWindow.h"</pre></p>

<p>int main(int argc, char *argv[])<br />
{
    QApplication app(argc, argv);<br />
    new POSMainWindow;<br />
    return app.exec();<br />
}
</p>

<p>6. 生成Makefile
<pre lang="bash">qmake -project
qmake
make</pre></p>

<p>7. 试试看</p>

<p><pre lang="bash">./POS</pre></p>
