---
layout: post
title: 历经苦难的Ubuntu硬盘重装
categories:
- Z-Turn
tags:
- '8.04'
- hardy
- reinstall
- Ubuntu
published: true
comments: true
---
<p>在表姐家拜年的时候，系统坏了。其实也不是坏了，就是nautilus等几个组件出了问题。想想系统也被我弄乱得一塌糊涂了，就决定重装了。现在的问题是，只有一个1M带宽的ADSL网，没有光盘。折腾就此开始。</p>

<p>首先，到<a href="http://cdimage.ubuntu.com/releases/" target="_blank">http://cdimage.ubuntu.com/releases/</a>找到alpha4的下载地址，下载alternative的光盘——耗时N小时-_-|||。是开着虚拟机用迅雷下完的。下载完后拷贝到home路径下的时候突然虚拟机黑屏……于是看了看home路径下的iso，大小正确，就以为复制完毕了。（居然忘了md5校验了）</p>

<p>然后，下载硬盘安装需要的东西……for hardy的启动文件：</p>

<p><a href="http://archive.ubuntu.com/ubuntu/dists/hardy/main/installer-i386/current/images/hd-media/" target="_blank">http://archive.ubuntu.com/ubuntu/dists/hardy/main/installer-i386/current/images/hd-media/</a></p>

<p>下载完了，把这几个文件放到/下，在menu.lst中添加如下几句启动信息：</p>

<p><!--more-->
<blockquote>title Linux Hardy Installer</blockquote></p>

<p>kernel (hd0,0)/vmlinuz root=/dev/ram ramdisk_size=32000 devfs=mount,dall</p>

<p>initrd (hd0,4)/initrd.gz</p>

<p>boot
重启后进入硬盘安装模式，结果校验包的时候……发现包校验不正确。这才后悔莫及，当时怎么不校验镜像文件！</p>

<p>退出硬盘安装模式后重启，提示Missing Operation System.看来是原来的系统的启动文件被删除了。</p>

<p>想起来自己还有个XP在硬盘上，但是需要XP盘修改硬盘分区表，找了找表姐的光盘，居然发现我暑假留下的番茄花园还在，哈哈。天助我也～</p>

<p>于是启动到XP的故障恢复控制台，执行FIXBOOT C:, FIXMBR C:</p>

<p>重启后，居然还是Missing Operation System……</p>

<p>无奈之下，在光盘启动画面乱点，点到了PQ Magic里，看了一下分区信息，原来是把sda1(linux的分区)设置成了启动分区，XP的那个分区不是。于是将其设为启动分区（不同软件有不同描述，如“可启动的”，“激活”，“活动分区”等）。重新到故障恢复控制台FIXBOOT C：， FIXMBR C：</p>

<p>终于启动到了XP，但是进了XP干什么呢？难道要重新下一个Alternative？</p>

<p>于是想到把原来的虚拟机镜像给挪过来。到VBOX的官网上下载了for win的VirtualBox，然后用explore2fs将那个镜像导出到win下（耗时近半小时T_T），终于挪过来了。这次校验了md5，正确的。</p>

<p>然后需要grub4dos啊——</p>

<p>到<a href="http://download.gna.org/grub4dos/" target="_blank">http://download.gna.org/grub4dos/</a>下了一个最新的。下完后，把menu.lst给写好，启动，开始安装。</p>

<p>结果还是提示校验错误！</p>

<p>顿时疯了……</p>

<p>仔细想想，应该是home的那个iso被默认选定了。现在任务很明显，要删掉那个镜像。</p>

<p>可是explore2fs是只读的……</p>

<p>上网继续搜，找到一个软件paragon mount everything。</p>

<p>可惜软件名气好，对付我的盘却不好使。</p>

<p>另外找了个：EXT2FS，</p>

<p>挖擦，太棒了。可以用了～～</p>

<p>那个破镜像，删之。</p>

<p>终于可以装了。</p>

<p>装完后……</p>

<p>发现nautilus有问题，还是有问题！</p>

<p>彻底疯了……明天回家装回gutsy去！</p>
