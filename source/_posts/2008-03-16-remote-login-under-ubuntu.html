---
layout: post
title: Ubuntu Server远程连接的配置
categories:
- Configuration
tags:
- ftp
- remote login
- ssh
- Ubuntu
- vnc
- vncserver
published: true
comments: true
---
<p>实验室的服务器(Ubuntu Linux 7.10 Server)需要远程登录，现在已经实现以下几种登录方式：</p>

<p>1. FTP</p>

<p>安装vsftpd，修改<code>/etc/vsftpd.conf</code></p>

<p>取消local_enable=YES行的注释，即可使用FTP工具以服务器上的本地用户名和密码登录服务器。用户权限为服务器本地用户原有的权限。</p>

<p>要想允许root登录FTP，需要修改<code>/etc/ftpusers</code>，将root行注释掉</p>

<p>2.ssh</p>

<p>在新立得里安装OpenSSH后，开机自动启动服务，即可通过ssh远程登录。</p>

<p>要想允许root登录，修改<code>/etc/ssh/sshd_config</code>文件，将<code>PermitRootLogin</code>的值改为 yes</p>

<p>3.vnc</p>

<p>因为有时候需要进入X界面，所以还需要通过vnc登录服务器。这种方式比较麻烦，不想通过vino登录，想使用vnc4server，只要服务启动了就可以实现多用户远程登录。</p>

<p><!--more-->在gdmsetup中的“远程“选项卡里点“配置XDMCP“。取消 “遵从非直接请求“的勾选。</p>

<p>修改<code>/etc/gdm/gdm.conf</code>文件</p>

<p>找到<code>[xdmcp]</code></p>

<p>设<code>Enable=true</code></p>

<p>找到<code># RemoteGreeter=/usr/lib/gdm/gdmlogin</code>行，取消其注释</p>

<p>确保<code>vnc4server, xinetd</code>已经安装</p>

<p>设定VNC连接密码：</p>

<p><pre lang="bash">sudo vncpasswd /root/.vncpasswd
sudo chmod 666 /root/.vncpasswd</pre></p>

<p>将服务随服务器启动：
<pre lang="bash">sudo vi /etc/xinetd.d/Xvnc</pre></p>

<p><blockquote>service Xvnc<br />
{
type = UNLISTED<br />
disable = no<br />
socket_type = stream<br />
protocol = tcp<br />
wait = yes<br />
user = root<br />
server = /usr/bin/Xvnc<br />
server_args = -inetd :1 -query localhost -geometry 1024x768 -depth 16 -once -fp /usr/share/fonts/X11/misc -DisconnectClients=0 -NeverShared passwordFile=/root/.vncpasswd -extension XFIXES<br />
port = 5901<br />
}
</blockquote></p>

<p>重启后，用VNC客户端通过端口号1就可以服务器了。</p>

<p>注意要把~/.vnc/xstartup最后添加一行gnome-session &，这样才能以GNOME界面登录。如果是kde界面，则为kde-session &</p>
